"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2305],{6410:function(e,n,i){var o=i(7297),t=i(31230);function r(){let e=(0,o.Z)(['\n      fragment HomeDetailsCardFragment on HOME_Details {\n        __typename\n        location {\n          city\n          stateCode\n          zipCode\n          streetAddress\n          fullLocation: formattedLocation(formatType: STREET_CITY_STATE_ZIP)\n          partialLocation: formattedLocation(formatType: STREET_ONLY)\n        }\n        price {\n          formattedPrice\n          ... on HOME_ValuationPrice {\n            typeDescription(abbreviate: true)\n          }\n        }\n        url\n        homeUrl\n        tags(include: MINIMAL) {\n          level\n          formattedName\n          icon {\n            vectorImage {\n              svg\n            }\n          }\n        }\n        fullTags: tags {\n          level\n          formattedName\n          icon {\n            vectorImage {\n              svg\n            }\n          }\n        }\n        floorSpace {\n          formattedDimension\n        }\n        lotSize {\n          ... on HOME_SingleDimension {\n            formattedDimension(minDecimalDigits: 2, maxDecimalDigits: 2)\n          }\n        }\n        bedrooms {\n          formattedValue(formatType: TWO_LETTER_ABBREVIATION)\n        }\n        bathrooms {\n          formattedValue(formatType: TWO_LETTER_ABBREVIATION)\n        }\n        isSaveable\n        preferences {\n          isSaved\n        }\n        metadata {\n          compositeId\n          legacyIdForSave\n          unifiedListingType\n          typedHomeId\n        }\n        typedHomeId\n        tracking {\n          key\n          value\n        }\n        displayFlags {\n          showMLSLogoOnListingCard\n          addAttributionProminenceOnListCard\n        }\n        ... on HOME_RoomForRent {\n          numberOfRoommates\n          availableDate: formattedAvailableDate(dateFormat: "MMM D")\n          providerListingId\n        }\n\n        ... on HOME_RentalCommunity {\n          activeListing {\n            provider {\n              summary(formatType: SHORT)\n              listingSource {\n                logoUrl\n              }\n            }\n          }\n          location {\n            communityLocation: formattedLocation(\n              formatType: STREET_COMMUNITY_NAME\n            )\n          }\n          providerListingId\n        }\n\n        ... on HOME_Property {\n          currentStatus {\n            isRecentlySold\n            isRecentlyRented\n            isActiveForRent\n            isActiveForSale\n            isOffMarket\n            isForeclosure\n          }\n          priceChange {\n            priceChangeDirection\n          }\n          activeListing {\n            provider {\n              summary(formatType: SHORT)\n              extraShortSummary: summary(formatType: EXTRA_SHORT)\n              listingSource {\n                logoUrl\n              }\n            }\n            dateListed\n          }\n          lastSold {\n            provider {\n              summary(formatType: SHORT)\n              extraShortSummary: summary(formatType: EXTRA_SHORT)\n              listingSource {\n                logoUrl\n              }\n            }\n          }\n          providerListingId\n        }\n\n        ... on HOME_FloorPlan {\n          priceChange {\n            priceChangeDirection\n          }\n          provider {\n            summary(formatType: SHORT)\n          }\n        }\n      }\n    ']);return r=function(){return e},e}function a(){let e=(0,o.Z)(["\n      fragment HomeDetailsCardHeroFragment on HOME_Details {\n        media {\n          heroImage(fallbacks: $heroImageFallbacks) {\n            url {\n              small\n              medium\n            }\n            webpUrl: url(compression: webp) {\n              small\n            }\n          }\n        }\n      }\n    "]);return a=function(){return e},e}function l(){let e=(0,o.Z)(["\n      fragment HomeDetailsCardPhotosFragment on HOME_Details {\n        media {\n          __typename\n          heroImage(fallbacks: $heroImageFallbacks) {\n            url {\n              small\n              medium\n            }\n            webpUrl: url(compression: webp) {\n              small\n              medium\n            }\n          }\n          photos {\n            url {\n              small\n              medium\n            }\n            webpUrl: url(compression: webp) {\n              small\n              medium\n            }\n          }\n        }\n      }\n    "]);return l=function(){return e},e}function s(){let e=(0,o.Z)(["\n      fragment HomeDetailsCallToActionFragment on HOME_Details {\n        hasPrequalifiers\n        ... on HOME_Property {\n          isTourAvailable(isOptimistic: true)\n        }\n        leadFormCallToAction(\n          context: CARD\n          appendOneClick: true\n          isInRentalsCTAButtonTest: $isInRentalsCTAButtonTest\n        ) {\n          callToActionType\n          callToActionDisplayLabel\n          supportsCancellableSubmission\n          buttonStyle\n        }\n      }\n    "]);return s=function(){return e},e}let d=()=>({homeDetails:(0,t.ZP)(r()),homeDetailsHero:(0,t.ZP)(a()),homeDetailsPhotos:(0,t.ZP)(l()),homeDetailsCallToAction:(0,t.ZP)(s())});n.Z=d},48935:function(e,n,i){i.d(n,{G5:function(){return Y},ZP:function(){return X},oz:function(){return B},Jv:function(){return V}});var o,t=i(70655),r=i(85893),a=i(23098),l=i(95084),s=i(84524),d=i(28353),m=i(99973),u=i(72680),c=i(68100),p=i(26395),v=i(29796),g=i(52152),h=i(80667),f=i(67294),S=i(97650),T=i(8679),O=i.n(T),R=i(20957);let E="https://www.trulia.com/images/txl3R/placeholder_images/PropertyCardPlaceholder.svg",A=void 0,C={FLOOR_PLAN:"HOME_FloorPlan",PROPERTY:"HOME_Property",ROOM_FOR_RENT:"HOME_RoomForRent",RENTAL_COMMUNITY:"HOME_RentalCommunity",BUILDER_COMMUNITY:"HOME_BuilderCommunity"},y={RECENTLY_SOLD_PRICE:"HOME_LastSoldPrice",TRULIA_ESTIMATE_PRICE:"HOME_ValuationPrice",ON_MARKET_PRICE:"HOME_SinglePrice",FORECLOSURE_ESTIMATE:"HOME_ForeclosureEstimatePrice",EMPTY_PRICE:"HOME_EmptyPrice",EMPTY_SOLD_PRICE:"HOME_EmptySoldPrice",ON_MARKET_PRICE_RANGE:"HOME_PriceRange",UNKNOWN_PRICE:"HOME_UnknownPrice"},_=e=>e.price&&e.price.formattedPrice?e.price.typeDescription?"".concat(e.price.typeDescription," ").concat(e.price.formattedPrice):e.price.formattedPrice:"",I=e=>e.bedrooms&&e.bedrooms.formattedValue?e.bedrooms.formattedValue:"",b=e=>e.bathrooms&&e.bathrooms.formattedValue?e.bathrooms.formattedValue:"",L=e=>{let n="default";switch(e){case"HIGHLIGHTED":n="on market";break;case"ALERT":n="off market";break;case"LOWLIGHT":n="lowlight";break;case"NORMAL":n="default"}return n},M=(e,n)=>e.tags||e.fullTags?n?e.fullTags.map(e=>{var n,i;let o=null===(n=e.icon)||void 0===n?void 0:null===(i=n.vectorImage)||void 0===i?void 0:i.svg;return{type:L(e.level),value:e.formattedName||"",iconUrl:o}}):e.tags.map(e=>{var n,i;let o=null===(n=e.icon)||void 0===n?void 0:null===(i=n.vectorImage)||void 0===i?void 0:i.svg;return{type:L(e.level),value:e.formattedName||"",iconUrl:o}}):null,P=e=>e.priceChange&&e.priceChange.priceChangeDirection?"EQUAL"===e.priceChange.priceChangeDirection?A:e.priceChange.priceChangeDirection.toLowerCase():A,H=e=>{let n="",i="",o="",t="";return e.location&&(n=(e.location.communityLocation?e.location.communityLocation:e.location.partialLocation)||"",i=e.location.city||"",o=e.location.stateCode||"",t=e.location.zipCode||""),{streetAddress:n,city:i,stateCode:o,zipCode:t}},k=e=>{if(e.numberOfRoommates){if(1===e.numberOfRoommates)return"1 Roommate";if(e.numberOfRoommates>1)return"".concat(e.numberOfRoommates," Roommates")}return""},D=e=>e.availableDate?e.availableDate:"",N=e=>e.__typename===C.ROOM_FOR_RENT,U=e=>e.__typename===C.RENTAL_COMMUNITY?null:e.floorSpace&&e.floorSpace.formattedDimension,w=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"small",t={},r=(0,R.supportsWebp)(n);return e.media&&Array.isArray(e.media.photos)&&e.media.photos.length>0&&e.media.photos[0].url&&e.media.photos[0].url[o]&&(t.photos=e.media.photos.map(e=>r&&e.webpUrl?{url:e.webpUrl&&(e.webpUrl[o]||e.webpUrl.extraLarge||e.webpUrl.large||e.webpUrl.medium||e.webpUrl.small)}:{url:e.url[o]||e.url.extraLarge||e.url.large||e.url.medium||e.url.small}),t.imageSrc=t.photos[0].url),e.media&&e.media.heroImage&&e.media.heroImage.url&&e.media.heroImage.url[o]?t.imageSrc=r&&e.media.heroImage.webpUrl?e.media.heroImage.webpUrl[o]:e.media.heroImage.url[o]:t.imageSrc||(t.imageSrc=i),t},F=e=>{var n,i;return(null==e?void 0:null===(n=e.media)||void 0===n?void 0:null===(i=n.heroImage)||void 0===i?void 0:i.__typename)==="MEDIA_HeroImageStreetView"},x=(e,n)=>{var i,o,t,r,a,l,s,d,m;if(n){let n=(null==e?void 0:null===(l=e.activeListing)||void 0===l?void 0:null===(s=l.provider)||void 0===s?void 0:s.extraShortSummary)||(null==e?void 0:null===(d=e.lastSold)||void 0===d?void 0:null===(m=d.provider)||void 0===m?void 0:m.extraShortSummary);if(Array.isArray(n))return n.join(", ")}let u=(null==e?void 0:null===(i=e.activeListing)||void 0===i?void 0:null===(o=i.provider)||void 0===o?void 0:o.summary)||(null==e?void 0:null===(t=e.lastSold)||void 0===t?void 0:null===(r=t.provider)||void 0===r?void 0:r.summary)||(null==e?void 0:null===(a=e.provider)||void 0===a?void 0:a.summary);if(Array.isArray(u))return u.join(", ")},Z=e=>{var n,i,o,t,r,a,l;return(null==e?void 0:null===(n=e.displayFlags)||void 0===n?void 0:n.showMLSLogoOnListingCard)?(null==e?void 0:null===(i=e.activeListing)||void 0===i?void 0:null===(o=i.provider)||void 0===o?void 0:null===(t=o.listingSource)||void 0===t?void 0:t.logoUrl)||(null==e?void 0:null===(r=e.lastSold)||void 0===r?void 0:null===(a=r.provider)||void 0===a?void 0:null===(l=a.listingSource)||void 0===l?void 0:l.logoUrl):""},V=function(e,n){var i,o;let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,{useFullTags:l,useExtraShortSummary:s}=r;return{...H(e),...w(e,n,t,a),tags:M(e,l),saved:e.preferences&&e.preferences.isSaved,propertyLink:e.url||"",price:_(e),beds:I(e),baths:b(e),floorSpace:U(e),lotSize:null==e?void 0:null===(i=e.lotSize)||void 0===i?void 0:i.formattedDimension,trend:P(e),imageAlt:e.location&&e.location.fullLocation||"",fallbackSrc:t,isStreetView:F(e),summary:x(e,s),summaryColor:(null==e?void 0:null===(o=e.displayFlags)||void 0===o?void 0:o.addAttributionProminenceOnListCard)?"default":"lowlight",logoUrl:Z(e)}},j=function(e,n){var i;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,t=arguments.length>3?arguments[3]:void 0;return{...H(e),...w(e,n,o,t),tags:M(e),saved:e.preferences&&e.preferences.isSaved,propertyLink:e.url||"",price:_(e),beds:I(e),baths:b(e),floorSpace:U(e),lotSize:null==e?void 0:null===(i=e.lotSize)||void 0===i?void 0:i.formattedDimension,trend:P(e),imageAlt:e.location&&e.location.fullLocation||"",fallbackSrc:o,isStreetView:F(e),numberOfRoommates:k(e),availableDate:D(e),isRoomForRent:N(e),summary:x(e),logoUrl:Z(e)}},Y=e=>{let n=e&&e.__typename;return!(n!==C.PROPERTY&&n!==C.FLOOR_PLAN&&n!==C.ROOM_FOR_RENT&&n!==C.RENTAL_COMMUNITY)},B=()=>y;var z=i(95762),W=i(59066),G=i(6410),K=i(54860);let $=((o=class extends f.Component{render(){let{homeDetails:e}=this.props,{__typename:n}=e,{isActiveForRent:i}="currentStatus"in e?e.currentStatus:{isActiveForRent:!1};return n===C.ROOM_FOR_RENT||n===C.RENTAL_COMMUNITY||i?this.generateForRentPropertyCard():n===C.PROPERTY||n===C.FLOOR_PLAN||n===C.BUILDER_COMMUNITY?this.generateForSalePropertyCard():null}constructor(...e){var n;super(...e),n=this,this.state={mediaIndex:0},this.onSave=()=>{let{onSave:e,onUnsave:n,homeDetails:i}=this.props;i.preferences&&i.preferences.isSaved?n({homeDetails:i}):e({homeDetails:i})},this.onClick=e=>{let{onClick:n,homeDetails:i,fallbackSrc:o,session:t={},mediaSize:r}=this.props,{supportedMediaTypes:a}=t,{mediaIndex:l}=this.state;if(n){let{photos:t,imageSrc:s}=w(i,a,o,r),d=t?t[l].url:s;n(e,d)}},this.onMediaIndexChanged=e=>{let{onMediaIndexChanged:n}=this.props;this.setState({mediaIndex:e},()=>{n&&n(e)})},this.filterCardPhotos=e=>{let{lazyLoadImage:n,placeholderImage:i,carouselEnabled:o}=this.props;if(n){let{photos:n,imageSrc:o,imageSources:t,...r}=e;return{...r,imageSrc:i}}if(!o){let{photos:n,imageSrc:i,imageSources:o,...t}=e;return{...t,imageSrc:i}}return e},this.getAdditionalActions=function(){var e;let i,{includeSimilarHomes:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{handleShareHome:t,handleHideHome:v,handleUnhideHome:g,handleSeeSimilarHomes:h,onUnsave:f,onSave:S,homeDetails:T,createAnalyticsEvent:O,isActionRowExposed:R,isLeadFormSubmitted:E,handleLeadForm:A}=n.props,C=t?{id:"share",title:"Share",icon:(0,r.jsx)(l.Z,{}),onClick:e=>{t(T),(0,K.Z)(e)}}:null,y=v?{id:"hide",title:"Hide",icon:(0,r.jsx)(s.Z,{}),onClick:e=>{v(T),(0,K.Z)(e)}}:null,_=g?{id:"unhide",title:"Unhide",icon:(0,r.jsx)(s.Z,{}),onClick:e=>{g(T),(0,K.Z)(e)}}:null,I=T.isTourAvailable,b=A?{id:"lead form",title:E?"Sent":I?"Tour":"Email",disabled:E,icon:I?(0,r.jsx)(d.Z,{}):(0,r.jsx)(m.Z,{}),onClick:e=>{(0,K.Z)(e),A(),O(a.Uk.ACTION,{interactedWith:"property card exposed: lead form click",leadStart:1}).track()}}:null,L=h&&o?{id:"similarHomes",title:R?"Similar":"See Similar Homes",icon:(0,r.jsx)(u.Z,{}),onClick:e=>{h(T),(0,K.Z)(e),O(a.Uk.INTERACTION,{interactedWith:"property card ".concat(R?"exposed":"dropdown"," action:similar homes")}).track()}}:null;t&&(i=T.preferences&&T.preferences.isSaved?{id:"unsave",title:"Unsave",icon:(0,r.jsx)(c.Z,{}),onClick:e=>{f({homeDetails:T}),O(a.Uk.INTERACTION,{interactedWith:"property card:dropdown unsave"}).track(),(0,K.Z)(e)}}:{id:"save",title:"Save",icon:(0,r.jsx)(p.Z,{}),onClick:e=>{S({homeDetails:T}),O(a.Uk.INTERACTION,{interactedWith:"property card ".concat(R?"exposed":"dropdown",":dropdown save")}).track(),(0,K.Z)(e)}});let M=null===(e=T.preferences)||void 0===e?void 0:e.isSaved,P=R?[L,M?null:y,C,M?b:null,M?null:i].filter(e=>e):[i,C,y,_,L].filter(e=>e);return P},this.generateForSalePropertyCard=()=>{var e,n,i,o;let{homeDetails:t,fallbackSrc:a,useFullTags:l,onSave:s,session:d={},onUnsave:m,index:u,mediaSize:c,eagerLoadingFirstImage:p,breakpoint:g,isActionRowExposed:h,...f}=this.props,{supportedMediaTypes:S}=d,T=!0===t.isSaveable&&s&&m,O=this.filterCardPhotos(V(t,S,a,{useFullTags:l},c)),R=this.getAdditionalActions({includeSimilarHomes:!0}),E=(null==t?void 0:null===(e=t.groupedInsights)||void 0===e?void 0:e.insights)&&(null==t?void 0:null===(n=t.media)||void 0===n?void 0:null===(i=n.photos)||void 0===i?void 0:i.length)>0?null==t?void 0:null===(o=t.groupedInsights)||void 0===o?void 0:o.insights:null;return(0,r.jsx)("div",{ref:this.cardRef,children:(0,r.jsx)(v.Z,{...O,...f,onClick:this.onClick,onMediaIndexChanged:this.onMediaIndexChanged,onSave:T?this.onSave:null,facts:E,"data-testid":"home-card-sale",fetchpriority:p&&0===u?"high":"auto",additionalActions:R,isActionRowExposed:h})})},this.generateForRentPropertyCard=()=>{let{homeDetails:e,fallbackSrc:n,onSave:i,onUnsave:o,session:t={},index:a,mediaSize:l,eagerLoadingFirstImage:s,...d}=this.props,{supportedMediaTypes:m}=t,u=!0===e.isSaveable&&i&&o,c=this.filterCardPhotos(j(e,m,n,l)),p=this.getAdditionalActions();return(0,r.jsx)(S.df,{threshold:0,as:"div",onChange:this.handleInViewTracking,triggerOnce:!0,children:(0,r.jsx)("div",{ref:this.cardRef,children:(0,r.jsx)(g.Z,{...c,...d,onClick:this.onClick,onMediaIndexChanged:this.onMediaIndexChanged,onSave:u?this.onSave:null,"data-testid":"home-card-rent",fetchpriority:s&&0===a?"high":"auto",additionalActions:p})})},null==e?void 0:e.url)},this.handleInViewTracking=e=>{let{createAnalyticsEvent:n,trackingModuleName:i,homeDetails:o}=this.props;e&&n(a.Uk.ACTION,{productPageDetails:i,providerListingId:"providerListingId"in o?o.providerListingId:null,eventAction:"RentalPropertyImpression",sendOnlyTo:"footprint"}).track()}}}).defaultProps={lazyLoadImage:!1,carouselEnabled:!0,placeholderImage:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",useFullTags:!1,homeDetails:{url:"",tags:[],bedrooms:"",bathrooms:"",floorSpace:null,currentStatus:null,media:null,location:null,isSaveable:!1,preferences:null,price:null,priceChange:null,handleHideHome:null,handleShareHome:null,handleSeeSimilarHomes:null},eagerLoadingFirstImage:!1},o.getFragments=G.Z,o);$=(0,t.gn)([(0,z.f)({session:W.B}),(0,a.j)()],$);let Q=(0,h.Ng)($);O()(Q,$);var X=Q},2445:function(e,n,i){var o=i(7297),t=i(31230),r=i(67294);function a(){let e=(0,o.Z)(["\n      fragment Viewer on USER_Viewer {\n        userStatus\n        userType\n        userId\n        loggedIn\n        name\n        email\n        profileImage {\n          small\n        }\n        permissions\n        userNavigation {\n          label\n          uri\n          description\n          children {\n            label\n            uri\n          }\n        }\n        optedOutOfSale\n      }\n    "]);return a=function(){return e},e}class l extends r.Component{}l.fragments={viewer:(0,t.Ps)(a())},n.Z=l}}]);